{"ast":null,"code":"import _slicedToArray from\"/Users/petrussiqui/Documents/GitHub/petrus-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";// 1. useEffect(callback) // ít dùng\n// - Gọi callback mỗi khi component re-render\n// - Gọi callback sau khi element thêm vào DOM\n// 2. useEffect(callback, [])\n// - Gọi callback 1 lần khi component mounted\n// - Gọi API\n// 3. useEffect(callback, [deps])\n// - Callback sẽ đc gọi lại mỗi khi deps (biến) thay đổi\n//---------------\n// 1. Callback luôn được gọi sau khi component mounted\n// 2. Cleanup function luôn đc gọi trước khi component unmounted\n// 3. Cleanup function luôn đc gọi trước khi callback() đc gọi (trừ lần mounted)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var tabs=['posts','todos','users'];function Ex2(){// const [title, setTitle] = useState();\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var _useState3=useState('posts'),_useState4=_slicedToArray(_useState3,2),type=_useState4[0],setType=_useState4[1];//useEffect sẽ run sau return\nuseEffect(function(){// document.title = title;\nfetch(\"https://jsonplaceholder.typicode.com/\".concat(type)).then(function(res){return res.json();}).then(function(todosApi){setTodos(todosApi);});//Cleanup func tránh rò rỉ bộ nhớ\nreturn function(){// fuction thực thiện khi out useEffect()\n};},[type]);return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\" useEffect \"}),/*#__PURE__*/_jsx(\"input\",{}),/*#__PURE__*/_jsx(\"div\",{children:tabs.map(function(tab){return/*#__PURE__*/_jsx(\"button\",{style:type===tab?{opacity:\"0.8\"}:{},onClick:function onClick(){return setType(tab);},children:tab},tab);})}),/*#__PURE__*/_jsx(\"div\",{className:\"ContentAPI\",children:/*#__PURE__*/_jsx(\"ul\",{children:todos.map(function(todo){return/*#__PURE__*/_jsx(\"li\",{children:todo.title||todo.name},todo.id);})})})]});}export default Ex2;","map":{"version":3,"names":["useEffect","useState","tabs","Ex2","todos","setTodos","type","setType","fetch","then","res","json","todosApi","map","tab","opacity","todo","title","name","id"],"sources":["/Users/petrussiqui/Documents/GitHub/petrus-app/src/component/hook/Ex2.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\n// 1. useEffect(callback) // ít dùng\n// - Gọi callback mỗi khi component re-render\n// - Gọi callback sau khi element thêm vào DOM\n// 2. useEffect(callback, [])\n// - Gọi callback 1 lần khi component mounted\n// - Gọi API\n// 3. useEffect(callback, [deps])\n// - Callback sẽ đc gọi lại mỗi khi deps (biến) thay đổi\n\n//---------------\n// 1. Callback luôn được gọi sau khi component mounted\n// 2. Cleanup function luôn đc gọi trước khi component unmounted\n// 3. Cleanup function luôn đc gọi trước khi callback() đc gọi (trừ lần mounted)\n\n\nconst tabs=['posts','todos','users']\nfunction Ex2() {\n    // const [title, setTitle] = useState();\n    const [todos, setTodos] = useState([])\n    const [type,setType]=useState('posts')\n    //useEffect sẽ run sau return\n    useEffect(() => {\n        // document.title = title;\n        fetch(`https://jsonplaceholder.typicode.com/${type}`)\n            .then(res => res.json())\n            .then(todosApi => {\n                setTodos(todosApi)\n            })\n\n        //Cleanup func tránh rò rỉ bộ nhớ\n        return ()=>{\n            // fuction thực thiện khi out useEffect()\n        }\n    }, [type])\n    return (\n        <div className=\"\">\n            <h1> useEffect </h1>\n            <input />\n            <div>\n                {tabs.map(tab=>(\n                    <button\n                        key={tab}\n                        style={ type === tab ? {opacity:\"0.8\"} : {}}\n                        onClick={()=>setType(tab)}\n                    >{tab}</button>\n                ))}\n            </div>\n            <div className=\"ContentAPI\"> \n            <ul>\n                {todos.map(todo => (\n                    <li key={todo.id}>{todo.title || todo.name}</li>\n                ))}\n            </ul>\n            </div>\n        </div>\n    )\n}\nexport default Ex2"],"mappings":"oIAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;wFAGA,GAAMC,KAAI,CAAC,CAAC,OAAD,CAAS,OAAT,CAAiB,OAAjB,CAAX,CACA,QAASC,IAAT,EAAe,CACX;AACA,cAA0BF,QAAQ,CAAC,EAAD,CAAlC,wCAAOG,KAAP,eAAcC,QAAd,eACA,eAAqBJ,QAAQ,CAAC,OAAD,CAA7B,yCAAOK,IAAP,eAAYC,OAAZ,eACA;AACAP,SAAS,CAAC,UAAM,CACZ;AACAQ,KAAK,gDAAyCF,IAAzC,EAAL,CACKG,IADL,CACU,SAAAC,GAAG,QAAIA,IAAG,CAACC,IAAJ,EAAJ,EADb,EAEKF,IAFL,CAEU,SAAAG,QAAQ,CAAI,CACdP,QAAQ,CAACO,QAAD,CAAR,CACH,CAJL,EAMA;AACA,MAAO,WAAI,CACP;AACH,CAFD,CAGH,CAZQ,CAYN,CAACN,IAAD,CAZM,CAAT,CAaA,mBACI,aAAK,SAAS,CAAC,EAAf,wBACI,mCADJ,cAEI,gBAFJ,cAGI,qBACKJ,IAAI,CAACW,GAAL,CAAS,SAAAC,GAAG,qBACT,eAEI,KAAK,CAAGR,IAAI,GAAKQ,GAAT,CAAe,CAACC,OAAO,CAAC,KAAT,CAAf,CAAiC,EAF7C,CAGI,OAAO,CAAE,yBAAIR,QAAO,CAACO,GAAD,CAAX,EAHb,UAIEA,GAJF,EACSA,GADT,CADS,EAAZ,CADL,EAHJ,cAYI,YAAK,SAAS,CAAC,YAAf,uBACA,oBACKV,KAAK,CAACS,GAAN,CAAU,SAAAG,IAAI,qBACX,oBAAmBA,IAAI,CAACC,KAAL,EAAcD,IAAI,CAACE,IAAtC,EAASF,IAAI,CAACG,EAAd,CADW,EAAd,CADL,EADA,EAZJ,GADJ,CAsBH,CACD,cAAehB,IAAf"},"metadata":{},"sourceType":"module"}